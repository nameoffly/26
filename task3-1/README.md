# Task 3-1: 综合选手信息数据合并

## 概述

本模块用于合并 `Data_4.xlsx` 和模型预测的粉丝投票百分比数据，生成包含选手完整信息的综合数据文件。

## 文件说明

| 文件 | 说明 |
|------|------|
| `merge_data.py` | 数据合并脚本 |
| `combined_contestant_info.csv` | 输出的综合选手信息文件 |
| `README.md` | 本说明文件 |

## 数据来源

### 赛季 1, 2, 28-34
- **粉丝投票数据**: `task1-4/final_outputs/baseline/grid_a1p0_b0p05_g10p0/fan_vote_percent.csv`
- **基于 CP-SAT 约束优化模型推断**

### 赛季 3-27
- **粉丝投票数据**: `fan_vote_estimates_entropy_smooth_150.csv`
- **基于熵平滑优化模型推断**

### 选手基本信息
- **Data_4.xlsx**: 选手姓名、舞伴、地区、国家、年龄、评委评分百分比

## 输出文件格式

`combined_contestant_info.csv` 包含以下列：

| 列名 | 数据类型 | 说明 |
|------|----------|------|
| 赛季 | int | 赛季编号 (1-34) |
| 周数 | int | 比赛周数 |
| 人名 | string | 选手名字 |
| 伴侣名 | string | 舞伴名字 |
| 地区 | string | 选手家乡州/地区（非美国选手可能为空） |
| 国家 | string | 选手国家 |
| 年龄 | int | 参赛时年龄 |
| 评委评分百分比 | float | 评委评分占比（小数形式，如 0.1835 = 18.35%） |
| 粉丝投票百分比 | float | 粉丝投票占比（小数形式，模型预测值） |
| 总百分比 | float | 评委 + 粉丝百分比之和 |

## 使用方法

```bash
# 运行数据合并脚本
python task3-1/merge_data.py
```

## 数据统计

- **总行数**: 2777 行
- **赛季覆盖**: 1-34 全部赛季
- **赛季分布**:
  - Season 1: 26 行
  - Season 2: 52 行
  - Season 3-27: 1997 行（来自 entropy_smooth 模型）
  - Season 28-34: 702 行

## 注意事项

- 地区列有部分缺失值，来自非美国选手（如新西兰、加拿大等）
- 百分比数据保持小数形式，如需显示为百分比需乘以 100
- 输出文件使用 UTF-8 with BOM 编码，支持 Excel 直接打开显示中文
- 数据按赛季、周数、人名排序
